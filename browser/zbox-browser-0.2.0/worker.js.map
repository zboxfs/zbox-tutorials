{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/logger.js","webpack:///./src/cache_backend.js","webpack:///./src/message.js","webpack:///./src/utils.js","webpack:///./src/worker.js"],"names":["self","chunkIds","moreModules","moduleId","modules","length","installedChunks","pop","installedModules","0","installedWasmModules","wasmImportObjects","5","./zbox","__wbindgen_object_drop_ref","p0i32","exports","__wbg_get_270d372edb76a021","p1i32","__wbindgen_is_undefined","__wbg_contains_e2e45ee10237db57","__wbg_insert_38da78f9c0cb0595","p2i32","__wbg_remove_61a961fdaa9df3b0","__wbindgen_string_new","__wbindgen_json_parse","__widl_f_debug_4_","p3i32","__widl_f_error_1_","__widl_f_error_4_","__widl_f_info_4_","__widl_f_log_4_","__widl_f_warn_4_","__widl_f_get_random_values_with_u8_array_Crypto","__widl_instanceof_WorkerGlobalScope","__widl_f_crypto_WorkerGlobalScope","__widl_f_new_XMLHttpRequest","__widl_f_get_all_response_headers_XMLHttpRequest","__widl_f_open_with_async_XMLHttpRequest","p4i32","p5i32","p6i32","__widl_f_send_XMLHttpRequest","__widl_f_send_with_opt_buffer_source_XMLHttpRequest","__widl_f_set_request_header_XMLHttpRequest","__widl_f_ready_state_XMLHttpRequest","__widl_f_set_timeout_XMLHttpRequest","__widl_f_set_with_credentials_XMLHttpRequest","__widl_f_status_XMLHttpRequest","__widl_f_set_response_type_XMLHttpRequest","__widl_f_response_XMLHttpRequest","__wbg_newnoargs_a172f39151049128","__wbg_call_8a9c8b0a32a202ff","__wbg_now_307a67b1c1d8ca31","__wbg_buffer_0b401f8e593a961e","__wbg_newwithbyteoffsetandlength_533a05dbfbcbee36","__wbg_length_7b1c5e3634bc9051","__wbg_new_662b0aa231e9b27c","__wbg_set_55ad9d0789844e32","__wbg_newwithbyteoffset_74477be1525e8d20","__wbg_subarray_9cc4d5558c9dcf2a","__wbg_slice_cf1634eadc553398","__wbg_byteLength_50d6b93074b674b7","__wbindgen_object_clone_ref","__wbindgen_debug_string","__wbindgen_throw","__wbindgen_rethrow","__wbindgen_memory","../cache_backend","clear","__webpack_require__","module","i","l","call","e","chunkId","promises","push","Promise","resolve","then","importScripts","1","forEach","wasmModuleId","installedWasmModuleData","promise","importObject","req","fetch","p","WebAssembly","compileStreaming","all","items","instantiate","instantiateStreaming","x","arrayBuffer","bytes","res","w","instance","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","s","__webpack_exports__","logger","TRACE","DEBUG","INFO","WARN","ERROR","OFF","[object Object]","level","this","msg","console","log","debug","info","warn","error","cacheBackend","contains","insert","remove","_logger__WEBPACK_IMPORTED_MODULE_0__","LOCAL_CACHE_DB","db","storeName","map","Map","dbClosed","reject","ver","Math","floor","Date","now","indexedDB","open","onerror","event","onupgradeneeded","target","result","objectStoreNames","createObjectStore","keyPath","onsuccess","openDb","transaction","objectStore","getAll","errorCode","item","set","relPath","data","close","tx","onabort","oncomplete","store","put","has","delete","deleteObjectStore","deleteStore","slice","message","zbox","initEnv","arg","type","optional","version","exists","openRepo","uri","pwd","opts","repairSuperBlock","repo","resetPassword","oldPwd","newPwd","pathExists","isFile","isDir","createFile","openFile","path","createDir","createDirAll","readDir","metadata","history","copy","from","to","removeFile","removeDir","removeDirAll","rename","file","read","readAll","readAllString","write","finish","writeOnce","seek","offset","setLen","currVersion","versionReader","ab2str","buf","String","fromCharCode","apply","Uint16Array","ensureStr","ensureStr2","s2","ensureInt","Number","isInteger","ensureIntOrNeg","opened","files","vrdrs","onmessage","msgTypes","scope","setLevel","params","logLevel","wasm","init_env","catch","err","finally","postMessage","zbox_version","Repo","repoId","search","exec","parseRepoIdInUri","loadCache","undefined","parseCacheType","cache_backend","opener","RepoOpener","createNew","compress","versionLimit","dedupChunk","readOnly","toString","immediateClose","zboxMsgHandler","cnt","keys","ptr","a","OpenOptions","append","truncate","repoMsgHandler","transBuf","Uint8Array","len","dst","buffer","vrdr","fileMsgHandler","versionReaderMsgHandler"],"mappings":"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","file":"worker.js","sourcesContent":[" \tself[\"webpackChunk\"] = function webpackChunkCallback(chunkIds, moreModules) {\n \t\tfor(var moduleId in moreModules) {\n \t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t}\n \t\twhile(chunkIds.length)\n \t\t\tinstalledChunks[chunkIds.pop()] = 1;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"1\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t0: 1\n \t};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \tfunction promiseResolve() { return Promise.resolve(); }\n\n \tvar wasmImportObjects = {\n \t\t5: function() {\n \t\t\treturn {\n \t\t\t\t\"./zbox\": {\n \t\t\t\t\t\"__wbindgen_object_drop_ref\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbindgen_object_drop_ref\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_get_270d372edb76a021\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_get_270d372edb76a021\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_is_undefined\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbindgen_is_undefined\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_contains_e2e45ee10237db57\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_contains_e2e45ee10237db57\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_insert_38da78f9c0cb0595\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_insert_38da78f9c0cb0595\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_remove_61a961fdaa9df3b0\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_remove_61a961fdaa9df3b0\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_string_new\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbindgen_string_new\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_json_parse\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbindgen_json_parse\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_debug_4_\": function(p0i32,p1i32,p2i32,p3i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_debug_4_\"](p0i32,p1i32,p2i32,p3i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_error_1_\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_error_1_\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_error_4_\": function(p0i32,p1i32,p2i32,p3i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_error_4_\"](p0i32,p1i32,p2i32,p3i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_info_4_\": function(p0i32,p1i32,p2i32,p3i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_info_4_\"](p0i32,p1i32,p2i32,p3i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_log_4_\": function(p0i32,p1i32,p2i32,p3i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_log_4_\"](p0i32,p1i32,p2i32,p3i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_warn_4_\": function(p0i32,p1i32,p2i32,p3i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_warn_4_\"](p0i32,p1i32,p2i32,p3i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_get_random_values_with_u8_array_Crypto\": function(p0i32,p1i32,p2i32,p3i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_get_random_values_with_u8_array_Crypto\"](p0i32,p1i32,p2i32,p3i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_instanceof_WorkerGlobalScope\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_instanceof_WorkerGlobalScope\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_crypto_WorkerGlobalScope\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_crypto_WorkerGlobalScope\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_new_XMLHttpRequest\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_new_XMLHttpRequest\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_get_all_response_headers_XMLHttpRequest\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_get_all_response_headers_XMLHttpRequest\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_open_with_async_XMLHttpRequest\": function(p0i32,p1i32,p2i32,p3i32,p4i32,p5i32,p6i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_open_with_async_XMLHttpRequest\"](p0i32,p1i32,p2i32,p3i32,p4i32,p5i32,p6i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_send_XMLHttpRequest\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_send_XMLHttpRequest\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_send_with_opt_buffer_source_XMLHttpRequest\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_send_with_opt_buffer_source_XMLHttpRequest\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_set_request_header_XMLHttpRequest\": function(p0i32,p1i32,p2i32,p3i32,p4i32,p5i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_set_request_header_XMLHttpRequest\"](p0i32,p1i32,p2i32,p3i32,p4i32,p5i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_ready_state_XMLHttpRequest\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_ready_state_XMLHttpRequest\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_set_timeout_XMLHttpRequest\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_set_timeout_XMLHttpRequest\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_set_with_credentials_XMLHttpRequest\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_set_with_credentials_XMLHttpRequest\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_status_XMLHttpRequest\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_status_XMLHttpRequest\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_set_response_type_XMLHttpRequest\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_set_response_type_XMLHttpRequest\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__widl_f_response_XMLHttpRequest\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__widl_f_response_XMLHttpRequest\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_newnoargs_a172f39151049128\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_newnoargs_a172f39151049128\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_call_8a9c8b0a32a202ff\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_call_8a9c8b0a32a202ff\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_now_307a67b1c1d8ca31\": function() {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_now_307a67b1c1d8ca31\"]();\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_buffer_0b401f8e593a961e\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_buffer_0b401f8e593a961e\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_newwithbyteoffsetandlength_533a05dbfbcbee36\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_newwithbyteoffsetandlength_533a05dbfbcbee36\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_length_7b1c5e3634bc9051\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_length_7b1c5e3634bc9051\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_new_662b0aa231e9b27c\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_new_662b0aa231e9b27c\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_set_55ad9d0789844e32\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_set_55ad9d0789844e32\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_newwithbyteoffset_74477be1525e8d20\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_newwithbyteoffset_74477be1525e8d20\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_subarray_9cc4d5558c9dcf2a\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_subarray_9cc4d5558c9dcf2a\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_slice_cf1634eadc553398\": function(p0i32,p1i32,p2i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_slice_cf1634eadc553398\"](p0i32,p1i32,p2i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_byteLength_50d6b93074b674b7\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbg_byteLength_50d6b93074b674b7\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_object_clone_ref\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbindgen_object_clone_ref\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_debug_string\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbindgen_debug_string\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_throw\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbindgen_throw\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_rethrow\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbindgen_rethrow\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_memory\": function() {\n \t\t\t\t\t\treturn installedModules[3].exports[\"__wbindgen_memory\"]();\n \t\t\t\t\t}\n \t\t\t\t},\n \t\t\t\t\"../cache_backend\": {\n \t\t\t\t\t\"clear\": function() {\n \t\t\t\t\t\treturn installedModules[1].exports[\"b\"]();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t};\n \t\t},\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n \t\tpromises.push(Promise.resolve().then(function() {\n \t\t\t// \"1\" is the signal for \"already loaded\"\n \t\t\tif(!installedChunks[chunkId]) {\n \t\t\t\timportScripts(\"\" + chunkId + \".worker.js\");\n \t\t\t}\n \t\t}));\n\n \t\t// Fetch + compile chunk loading for webassembly\n\n \t\tvar wasmModules = {\"1\":[5]}[chunkId] || [];\n\n \t\twasmModules.forEach(function(wasmModuleId) {\n \t\t\tvar installedWasmModuleData = installedWasmModules[wasmModuleId];\n\n \t\t\t// a Promise means \"currently loading\" or \"already loaded\".\n \t\t\tif(installedWasmModuleData)\n \t\t\t\tpromises.push(installedWasmModuleData);\n \t\t\telse {\n \t\t\t\tvar importObject = wasmImportObjects[wasmModuleId]();\n \t\t\t\tvar req = fetch(__webpack_require__.p + \"\" + {\"5\":\"c6ec55d439115bc56b88\"}[wasmModuleId] + \".module.wasm\");\n \t\t\t\tvar promise;\n \t\t\t\tif(importObject instanceof Promise && typeof WebAssembly.compileStreaming === 'function') {\n \t\t\t\t\tpromise = Promise.all([WebAssembly.compileStreaming(req), importObject]).then(function(items) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(items[0], items[1]);\n \t\t\t\t\t});\n \t\t\t\t} else if(typeof WebAssembly.instantiateStreaming === 'function') {\n \t\t\t\t\tpromise = WebAssembly.instantiateStreaming(req, importObject);\n \t\t\t\t} else {\n \t\t\t\t\tvar bytesPromise = req.then(function(x) { return x.arrayBuffer(); });\n \t\t\t\t\tpromise = bytesPromise.then(function(bytes) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(bytes, importObject);\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t\tpromises.push(installedWasmModules[wasmModuleId] = promise.then(function(res) {\n \t\t\t\t\treturn __webpack_require__.w[wasmModuleId] = (res.instance || res).exports;\n \t\t\t\t}));\n \t\t\t}\n \t\t});\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all WebAssembly.instance exports\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","const TRACE = 1;\nconst DEBUG = 2;\nconst INFO = 3;\nconst WARN = 4;\nconst ERROR = 5;\nconst OFF = 99;\n\n// logger\nclass Logger {\n  constructor(level) {\n    this.level = level || WARN;\n  }\n\n  setLevel(level) {\n    switch (level) {\n      case 'trace': this.level = TRACE; return level;\n      case 'debug': this.level = DEBUG; return level;\n      case 'info': this.level = INFO; return level;\n      case 'warn': this.level = WARN; return level;\n      case 'error': this.level = ERROR; return level;\n      case 'off': this.level = OFF; return level;\n      default: this.level = WARN; return 'warn';\n    }\n  }\n\n  trace(msg) {\n    if (this.level <= TRACE) console.log(msg);\n  }\n\n  debug(msg) {\n    if (this.level <= DEBUG) console.debug(msg);\n  }\n\n  info(msg) {\n    if (this.level <= INFO) console.info(msg);\n  }\n\n  warn(msg) {\n    if (this.level <= WARN) console.warn(msg);\n  }\n\n  error(msg) {\n    if (this.level <= ERROR) console.error(msg);\n  }\n}\n\nexport let logger = new Logger();\n","import { logger } from './logger';\n\n// local cache db name\nconst LOCAL_CACHE_DB = 'zbox_local_cache';\n\n// open cache backend database\nfunction openDb(storeName) {\n  return new Promise((resolve, reject) => {\n    const ver = Math.floor(Date.now() / 1000);\n    let req = indexedDB.open(LOCAL_CACHE_DB, ver);\n\n    req.onerror = (event) => {\n      reject('IndexedDB is forbidden to use');\n    };\n\n    req.onupgradeneeded = (event) => {\n      let db = event.target.result;\n      if (!db.objectStoreNames.contains(storeName)) {\n        db.createObjectStore(storeName, {\n          keyPath: 'relPath'\n        });\n      }\n    };\n\n    req.onsuccess = (event) => {\n      resolve(event.target.result);\n    };\n  });\n}\n\n// delete store in database\nfunction deleteStore(storeName) {\n  return new Promise((resolve, reject) => {\n    const ver = Math.floor(Date.now() / 1000);\n    let req = indexedDB.open(LOCAL_CACHE_DB, ver);\n\n    req.onerror = (event) => {\n      reject('IndexedDB is forbidden to use');\n    };\n\n    req.onupgradeneeded = (event) => {\n      let db = event.target.result;\n      if (db.objectStoreNames.contains(storeName)) {\n        db.deleteObjectStore(storeName);\n      }\n      resolve();\n    };\n\n    req.onsuccess = (event) => {\n      let db = event.target.result;\n      db.close();\n    };\n  });\n}\n\n// local cache backend\nclass CacheBackend {\n  constructor() {\n    this.db = null;\n    this.storeName = null;\n    this.map= new Map();\n    this.dbClosed = true;\n  }\n\n  open(storeName) {\n    let self = this;\n\n    return openDb(storeName)\n      .then(db => {\n        self.db = db;\n        self.storeName = storeName;\n\n        return new Promise((resolve, reject) => {\n          // load all items in local cache db into memory map\n          let req = self.db.transaction(storeName, 'readonly')\n            .objectStore(storeName)\n            .getAll();\n          req.onerror = (event) => {\n            reject('Database error: ' + event.target.errorCode);\n          };\n          req.onsuccess = (event) => {\n            let items = event.target.result;\n            items.forEach(item => {\n              self.map.set(item.relPath, item.data);\n            });\n            logger.debug(`Cache backend opened: ${items.length} cache items loaded`);\n            self.dbClosed = false;\n            resolve();\n          };\n        });\n      });\n  }\n\n  // immediate close database withouth saving data\n  immediateClose() {\n    if (!this.dbClosed) {\n      this.db.close();\n      this.storeName = null;\n      this.map.clear();\n      this.dbClosed = true;\n    }\n  }\n\n  close() {\n    let self = this;\n\n    if (self.dbClosed) {\n      return Promise.resolve();\n    }\n\n    return new Promise((resolve, reject) => {\n      let tx = self.db.transaction(self.storeName, 'readwrite');\n\n      tx.onabort = (event) => {\n        self.map.clear();\n        reject('Database tx aborted: ' + event.target.errorCode);\n      };\n      tx.onerror = (event) => {\n        self.map.clear();\n        reject('Database tx error: ' + event.target.errorCode);\n      };\n      tx.oncomplete = (event) => {\n        self.map.clear();\n        self.dbClosed = true;\n        resolve();\n      };\n\n      let store = tx.objectStore(self.storeName);\n\n      // clear all store then save all items from memory map\n      store.clear();\n      self.map.forEach((value, key) => {\n        store.put({ relPath: key, data: value });\n      });\n\n      self.db.close();\n    });\n  }\n\n  contains(relPath) {\n    return this.map.has(relPath);\n  }\n\n  get(relPath) {\n    return this.map.get(relPath);\n  }\n\n  insert(relPath, data) {\n    this.map.set(relPath, data);\n  }\n\n  remove(relPath) {\n    this.map.delete(relPath);\n  }\n\n  clear() {\n    this.map.clear();\n\n    let req = this.db.transaction(this.storeName, \"readwrite\")\n      .objectStore(this.storeName)\n      .clear();\n    req.onerror = (event) => {\n      logger.error('Clear local cache failed ' + event.target.errorCode);\n    };\n  }\n\n  destroy(storeName) {\n    return deleteStore(storeName);\n  }\n}\n\nexport let cacheBackend = new CacheBackend();\n\nexport function contains(relPath) {\n  return cacheBackend.contains(relPath);\n}\n\nexport function get(relPath) {\n  return cacheBackend.get(relPath);\n}\n\nexport function insert(relPath, data) {\n  cacheBackend.insert(relPath, data.slice());\n}\n\nexport function remove(relPath) {\n  cacheBackend.remove(relPath);\n}\n\nexport function clear() {\n  cacheBackend.clear();\n}\n","/*\n * Message types\n */\nconst MsgTypes = {\n  zbox: {\n    initEnv: {\n      name: 'initEnv',\n      arg: [{ debug: { type: 'boolean', optional: true } }],\n      optional: true\n    },\n    version: {\n      name: 'version',\n      arg: []\n    },\n    exists: {\n      name: 'exists',\n      arg: ['string']\n    },\n    openRepo: {\n      name: 'openRepo',\n      arg: [{\n        uri: { type: 'string' },\n        pwd: { type: 'string' },\n        opts: { type: 'object', optional: true }\n      }]\n    },\n    repairSuperBlock: {\n      name: 'repairSuperBlock',\n      arg: [{\n        uri: { type: 'string' },\n        pwd: { type: 'string' }\n      }]\n    }\n  },\n\n  repo: {\n    close: {\n      name: 'close',\n      arg: []\n    },\n    info: {\n      name: 'info',\n      arg: []\n    },\n    resetPassword: {\n      name: 'resetPassword',\n      arg: [\n        { oldPwd: { type: 'string' } },\n        { newPwd: { type: 'string' } }\n      ]\n    },\n    pathExists: {\n      name: 'pathExists',\n      arg: ['string']\n    },\n    isFile: {\n      name: 'isFile',\n      arg: ['string']\n    },\n    isDir: {\n      name: 'isDir',\n      arg: ['string']\n    },\n    createFile: {\n      name: 'createFile',\n      arg: ['string']\n    },\n    openFile: {\n      name: 'openFile',\n      arg: [\n        'string',\n        {\n          path: { type: 'boolean' },\n          opts: { type: 'object', optional: true }\n        }\n      ]\n    },\n    createDir: {\n      name: 'createDir',\n      arg: ['string']\n    },\n    createDirAll: {\n      name: 'createDirAll',\n      arg: ['string']\n    },\n    readDir: {\n      name: 'readDir',\n      arg: ['string']\n    },\n    metadata: {\n      name: 'metadata',\n      arg: ['string']\n    },\n    history: {\n      name: 'history',\n      arg: ['string']\n    },\n    copy: {\n      name: 'copy',\n      arg: [\n        { from: { type: 'string' } },\n        { to: { type: 'string' } }\n      ]\n    },\n    removeFile: {\n      name: 'removeFile',\n      arg: ['string']\n    },\n    removeDir: {\n      name: 'removeDir',\n      arg: ['string']\n    },\n    removeDirAll: {\n      name: 'removeDirAll',\n      arg: ['string']\n    },\n    rename: {\n      name: 'rename',\n      arg: [\n        { from: { type: 'string' } },\n        { to: { type: 'string' } }\n      ]\n    }\n  },\n\n  file: {\n    close: {\n      name: 'close',\n      arg: []\n    },\n    read: {\n      name: 'read',\n      arg: ['buffer']\n    },\n    readAll: {\n      name: 'readAll',\n      arg: []\n    },\n    readAllString: {\n      name: 'readAllString',\n      arg: []\n    },\n    write: {\n      name: 'write',\n      arg: ['string', 'buffer']\n    },\n    finish: {\n      name: 'finish',\n      arg: []\n    },\n    writeOnce: {\n      name: 'writeOnce',\n      arg: ['string', 'buffer']\n    },\n    seek: {\n      name: 'seek',\n      arg: [ {\n        from: { type: 'number' },\n        offset: { type: 'number' }\n      }]\n    },\n    setLen: {\n      name: 'setLen',\n      arg: ['number']\n    },\n    currVersion: {\n      name: 'currVersion',\n      arg: []\n    },\n    metadata: {\n      name: 'metadata',\n      arg: []\n    },\n    history: {\n      name: 'history',\n      arg: []\n    },\n    versionReader: {\n      name: 'versionReader',\n      arg: ['number']\n    }\n  },\n\n  versionReader: {\n    close: {\n      name: 'close',\n      arg: []\n    },\n    read: {\n      name: 'read',\n      arg: ['buffer']\n    },\n    readAll: {\n      name: 'readAll',\n      arg: []\n    },\n    readAllString: {\n      name: 'readAllString',\n      arg: []\n    },\n    seek: {\n      name: 'seek',\n      arg: [{\n        from: { type: 'number' },\n        offset: { type: 'number' }\n      }]\n    }\n  }\n};\n\nexport default MsgTypes;\n","// check if it is object\nexport function isObject(a) {\n  return a !== null && typeof a === 'object';\n}\n\n// check if it is number\nexport function isNumber(n) {\n  return typeof n === 'number';\n}\n\n// check if it is string\nexport function isString(s) {\n  return typeof s === 'string';\n}\n\n// check if it is array buffer view\nexport function isArrayBufferView(value) {\n  return value\n    && value.buffer instanceof ArrayBuffer\n    && value.byteLength !== undefined;\n}\n\n// convert ArrayBuffer to String\nexport function ab2str(buf) {\n  return String.fromCharCode.apply(null, new Uint16Array(buf));\n}\n\n// convert String to ArrayBuffer\nexport function str2ab(str) {\n  var buf = new ArrayBuffer(str.length * 2); // 2 bytes for each char\n  var bufView = new Uint16Array(buf);\n  for (var i = 0, strLen = str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\n\n// ensure arg is string\nexport function ensureStr(s) {\n  if (typeof s !== 'string') {\n    throw 'Wrong argument, string required';\n  }\n}\n\n// ensure two args are string\nexport function ensureStr2(s, s2) {\n  if (typeof s !== 'string' || typeof s2 !== 'string') {\n    throw 'Wrong argument, string required';\n  }\n}\n\n// ensure one parameter is positive integer number\nexport function ensureInt(n) {\n  if (!Number.isInteger(n) || n < 0) {\n    throw 'Wrong argument, positive integer required';\n  }\n}\n\n// ensure one parameter is positive or negative integer number\nexport function ensureIntOrNeg(n) {\n  if (!Number.isInteger(n)) {\n    throw 'Wrong argument, integer required';\n  }\n}\n","import MsgTypes from \"./message\";\nimport { logger } from './logger';\nimport { cacheBackend } from './cache_backend';\nimport {\n  isString,\n  isObject,\n  ensureStr,\n  ensureStr2,\n  ensureInt,\n  ensureIntOrNeg,\n  ab2str\n} from \"./utils\";\n\n// global zbox and repo object\nlet zbox = null;\nlet repo = null;\n\n// opened objects\n// key: ptr integer number\n// value: opened object\nlet opened = {\n  files: {},      // files\n  vrdrs: {}       // version readers\n};\n\n// parse repo id in uri\nfunction parseRepoIdInUri(uri) {\n  const search = /^zbox:\\/\\/\\w+@(\\w+)/.exec(uri);\n  if (!search) {\n    throw 'Invalid Uri';\n  }\n  const repoId = search[1];\n  return repoId;\n}\n\n// parse cache type in uri\nfunction parseCacheType(uri) {\n  const search = /^zbox:\\/\\/\\w+@\\w+\\?.*cache_type=(\\w+).*/.exec(uri);\n  return search ? search[1] : undefined;\n}\n\nfunction zboxMsgHandler(msg, msgTypes) {\n  switch (msg.type) {\n    case msgTypes.initEnv.name: {\n      let level = logger.setLevel(msg.params ? msg.params.logLevel : 'warn');\n      import('./wasm/zbox')\n        .then(wasm => {\n          zbox = wasm;\n          zbox.init_env(level);\n        })\n        .catch(err => {\n          logger.error(`Load ZboxFS wasm failed: ${err}`);\n          msg.error =  err;\n        })\n        .finally(() => postMessage(msg));\n      return;\n    }\n\n    case msgTypes.version.name: {\n      msg.result = zbox.zbox_version();\n      postMessage(msg);\n      break;\n    }\n\n    case msgTypes.exists.name: {\n      ensureStr(msg.params);\n      msg.result = zbox.Repo.exists(msg.params);\n      postMessage(msg);\n      return;\n    }\n\n    case msgTypes.openRepo.name: {\n      ensureStr2(msg.params.uri, msg.params.pwd);\n\n      // find repo id in uri\n      const repoId = parseRepoIdInUri(msg.params.uri);\n\n      // load local cache backend and then open repo\n      let loadCache;\n      if (parseCacheType(msg.params.uri) === 'mem') {\n        // no need to load cache for memory backend\n        loadCache = Promise.resolve();\n      } else {\n        loadCache = cacheBackend.open(repoId);\n      }\n      loadCache\n        .then(() => {\n          // create and config opener\n          let opener = new zbox.RepoOpener();\n          let opts = msg.params.opts || {};\n\n          if (opts.hasOwnProperty('create'))\n            opener.create(opts.create);\n          if (opts.hasOwnProperty('createNew'))\n            opener.createNew(opts.createNew);\n          if (opts.hasOwnProperty('compress'))\n            opener.compress(opts.compress);\n          if (opts.hasOwnProperty('versionLimit'))\n            opener.versionLimit(opts.versionLimit);\n          if (opts.hasOwnProperty('dedupChunk'))\n            opener.dedupChunk(opts.dedupChunk);\n          if (opts.hasOwnProperty('readOnly'))\n            opener.readOnly(opts.readOnly);\n\n          // open zbox\n          repo = opener.open(msg.params.uri, msg.params.pwd);\n        })\n        .catch(err => {\n          msg.error = err.toString();\n          cacheBackend.immediateClose();\n        })\n        .finally(() => postMessage(msg));\n\n      return;\n    }\n\n    case msgTypes.repairSuperBlock.name: {\n      ensureStr2(msg.params.uri, msg.params.pwd);\n      zbox.Repo.repairSuperBlock(msg.params.uri,\n          msg.params.pwd);\n      postMessage(msg);\n      return;\n    }\n  }\n}\n\nfunction repoMsgHandler(msg, msgTypes) {\n  switch (msg.type) {\n    case msgTypes.close.name: {\n      let cnt = Object.keys(opened.files).length;\n      if (cnt > 0) {\n        logger.warn(`${cnt} file(s) still opened when close repo`);\n      }\n      cnt = Object.keys(opened.vrdrs).length;\n      if (cnt > 0) {\n        logger.warn(`${cnt} version reader(s) still opened when close repo`);\n      }\n      repo.close();\n      cacheBackend.close()\n        .catch(err => msg.error = err)\n        .finally(() => postMessage(msg));\n      return;\n    }\n\n    case msgTypes.info.name: {\n      msg.result = repo.info();\n      break;\n    }\n\n    case msgTypes.resetPassword.name: {\n      ensureStr2(msg.params.oldPwd, msg.params.newPwd);\n      repo.resetPassword(msg.params.oldPwd, msg.params.newPwd);\n      break;\n    }\n\n    case msgTypes.pathExists.name: {\n      ensureStr(msg.params);\n      msg.result = repo.pathExists(msg.params);\n      break;\n    }\n\n    case msgTypes.isFile.name: {\n      ensureStr(msg.params);\n      msg.result = repo.isFile(msg.params);\n      break;\n    }\n\n    case msgTypes.isDir.name: {\n      ensureStr(msg.params);\n      msg.result = repo.isDir(msg.params);\n      break;\n    }\n\n    case msgTypes.createFile.name: {\n      ensureStr(msg.params);\n      let file = repo.createFile(msg.params);\n      opened.files[file.ptr] = file;\n      msg.result = file.ptr;\n      break;\n    }\n\n    case msgTypes.openFile.name: {\n      let file;\n\n      if (isString(msg.params)) {\n        file = repo.openFile(msg.params);\n\n      } else if (isObject(msg.params)) {\n        ensureStr(msg.params.path);\n\n        let opener = new zbox.OpenOptions();\n        let opts = msg.params.opts || {};\n        if (opts.hasOwnProperty('read')) opener.read(opts.read);\n        if (opts.hasOwnProperty('write')) opener.write(opts.write);\n        if (opts.hasOwnProperty('append')) opener.append(opts.append);\n        if (opts.hasOwnProperty('truncate')) opener.truncate(opts.truncate);\n        if (opts.hasOwnProperty('create')) opener.create(opts.create);\n        if (opts.hasOwnProperty('createNew')) opener.createNew(opts.createNew);\n        if (opts.hasOwnProperty('versionLimit')) opener.versionLimit(opts.versionLimit);\n        if (opts.hasOwnProperty('dedupChunk')) opener.dedupChunk(opts.dedupChunk);\n\n        file = opener.open(repo, msg.params.path);\n\n      } else {\n        throw 'Wrong argument, string or Object required';\n      }\n\n      opened.files[file.ptr] = file;\n      msg.result = file.ptr;\n\n      break;\n    }\n\n    case msgTypes.createDir.name: {\n      ensureStr(msg.params);\n      repo.createDir(msg.params);\n      break;\n    }\n\n    case msgTypes.createDirAll.name: {\n      ensureStr(msg.params);\n      repo.createDirAll(msg.params);\n      break;\n    }\n\n    case msgTypes.readDir.name: {\n      ensureStr(msg.params);\n      msg.result = repo.readDir(msg.params);\n      break;\n    }\n\n    case msgTypes.metadata.name: {\n      ensureStr(msg.params);\n      msg.result = repo.metadata(msg.params);\n      break;\n    }\n\n    case msgTypes.history.name: {\n      ensureStr(msg.params);\n      msg.result = repo.history(msg.params);\n      break;\n    }\n\n    case msgTypes.copy.name: {\n      ensureStr2(msg.params.from, msg.params.to);\n      repo.copy(msg.params.from, msg.params.to);\n      break;\n    }\n\n    case msgTypes.removeFile.name: {\n      ensureStr(msg.params);\n      repo.removeFile(msg.params);\n      break;\n    }\n\n    case msgTypes.removeDir.name: {\n      ensureStr(msg.params);\n      repo.removeDir(msg.params);\n      break;\n    }\n\n    case msgTypes.removeDirAll.name: {\n      ensureStr(msg.params);\n      repo.removeDirAll(msg.params);\n      break;\n    }\n\n    case msgTypes.rename.name: {\n      ensureStr2(msg.params.from, msg.params.to);\n      repo.rename(msg.params.from, msg.params.to);\n      break;\n    }\n  }\n\n  // send message back to main thread\n  postMessage(msg);\n}\n\nfunction fileMsgHandler(msg, msgTypes) {\n  let file = opened.files[msg.object];\n\n  if (file === undefined) {\n    throw 'File not opened';\n  }\n\n  // data bytes transfer buffer\n  let transBuf = null;\n\n  switch (msg.type) {\n    case msgTypes.close.name: {\n      file.close();\n      delete opened.files[msg.object];\n      break;\n    }\n\n    case msgTypes.read.name: {\n      let buf = new Uint8Array(msg.params.buf, msg.params.offset, msg.params.len);\n      const read = file.read(buf);\n      msg.result = {\n        buf: msg.params.buf,\n        offset: msg.params.offset,\n        len: read\n      };\n      transBuf = [msg.params.buf];\n      break;\n    }\n\n    case msgTypes.readAll.name: {\n      let dst = file.readAll();\n      msg.result = dst.buffer;\n      transBuf = [dst.buffer];\n      break;\n    }\n\n    case msgTypes.readAllString.name: {\n      let dst = file.readAll();\n      msg.result = ab2str(dst.buffer);\n      break;\n    }\n\n    case msgTypes.write.name: {\n      const buf = new Uint8Array(msg.params.buf, msg.params.offset, msg.params.len);\n      msg.result = file.write(buf);\n      break;\n    }\n\n    case msgTypes.finish.name: {\n      file.finish();\n      break;\n    }\n\n    case msgTypes.writeOnce.name: {\n      const buf = new Uint8Array(msg.params.buf, msg.params.offset, msg.params.len);\n      msg.result = file.writeOnce(buf);\n      break;\n    }\n\n    case msgTypes.seek.name: {\n      ensureInt(msg.params.from);\n      ensureIntOrNeg(msg.params.offset);\n      msg.result = file.seek(msg.params.from, msg.params.offset);\n      break;\n    }\n\n    case msgTypes.setLen.name: {\n      ensureInt(msg.params);\n      file.setLen(msg.params);\n      break;\n    }\n\n    case msgTypes.currVersion.name: {\n      msg.result = file.currVersion();\n      break;\n    }\n\n    case msgTypes.metadata.name: {\n      msg.result = file.metadata();\n      break;\n    }\n\n    case msgTypes.history.name: {\n      msg.result = file.history();\n      break;\n    }\n\n    case msgTypes.versionReader.name: {\n      ensureInt(msg.params);\n      const vrdr = file.versionReader(msg.params);\n      opened.vrdrs[vrdr.ptr] = vrdr;\n      msg.result = vrdr.ptr;\n      break;\n    }\n  }\n\n  // send message back to main thread\n  if (transBuf) {\n    postMessage(msg, transBuf);\n  } else {\n    postMessage(msg);\n  }\n}\n\nfunction versionReaderMsgHandler(msg, msgTypes) {\n  let vrdr = opened.vrdrs[msg.object];\n\n  if (vrdr == undefined) {\n    throw 'Version reader is closed';\n  }\n\n  // data bytes transfer buffer\n  let transBuf = null;\n\n  switch (msg.type) {\n    case msgTypes.close.name: {\n      vrdr.close();\n      delete opened.vrdrs[msg.object];\n      break;\n    }\n\n    case msgTypes.read.name: {\n      let buf = new Uint8Array(msg.params.buf, msg.params.offset, msg.params.len);\n      const read = vrdr.read(buf);\n      msg.result = {\n        buf: msg.params.buf,\n        offset: msg.params.offset,\n        len: read\n      };\n      transBuf = [msg.params.buf];\n      break;\n    }\n\n    case msgTypes.readAll.name: {\n      let dst = vrdr.readAll();\n      msg.result = dst.buffer;\n      transBuf = [dst.buffer];\n      break;\n    }\n\n    case msgTypes.readAllString.name: {\n      let dst = vrdr.readAll();\n      msg.result = ab2str(dst.buffer);\n      break;\n    }\n\n    case msgTypes.seek.name: {\n      ensureInt(msg.params.from);\n      ensureIntOrNeg(msg.params.offset);\n      msg.result = vrdr.seek(msg.params.from, msg.params.offset);\n      break;\n    }\n  }\n\n  // send message back to main thread\n  if (transBuf) {\n    postMessage(msg, transBuf);\n  } else {\n    postMessage(msg);\n  }\n}\n\nonmessage = function(event) {\n  let msg = event.data;\n  // console.log(`main -> worker: ${JSON.stringify(msg)}`);\n\n  // reset message result and error\n  msg.result = null;\n  msg.error = null;\n\n  // dispatch message\n  const msgTypes = MsgTypes[msg.scope];\n  try {\n    switch (msg.scope) {\n      case 'zbox': {\n        zboxMsgHandler(msg, msgTypes);\n        break;\n      }\n\n      case 'repo': {\n        repoMsgHandler(msg, msgTypes);\n        break;\n      }\n\n      case 'file': {\n        fileMsgHandler(msg, msgTypes);\n        break;\n      }\n\n      case 'versionReader': {\n        versionReaderMsgHandler(msg, msgTypes);\n        break;\n      }\n    }\n  } catch (err) {\n    msg.error = err;\n    postMessage(msg);\n  }\n};\n"],"sourceRoot":""}